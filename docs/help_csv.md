# CSV 列说明（最容易出错的部分）

> 规则 1：**列名必须与模板完全一致**（大小写、下划线、单位后缀都要匹配）。  
> 规则 2：App 会自动去掉列名首尾空格，但**不会**自动更正拼写/单位/大小写。

## 1) 一行数据代表什么？

- **PFR**：一行 = 一个工况（$V,T,\dot{v},F_{0,i}$）下的出口测量  
- **CSTR**：一行 = 一个稳态工况（$V,T,\dot{v},C_{0,i}$）下的出口测量（通常认为出口=釜内浓度）  
- **BSTR**：一行 = 在（$C_{0,i},T$）下某个时间点 $t$ 的测量

## 2) 必要输入列（每行都要有）

### PFR（流动反应器）

- `V_m3`：体积 [m³]（要求 $V\\ge 0$）
- `T_K`：温度 [K]（要求 $T>0$）
- `vdot_m3_s`：体积流量 [m³/s]（要求 $\dot v>0$）
- `F0_<物种名>_mol_s`：入口摩尔流量 [mol/s]（每个物种一列，要求 $\ge 0$）

### CSTR（稳态连续搅拌釜）

- `V_m3`：体积 [m³]（要求 $V\ge 0$）
- `T_K`：温度 [K]（要求 $T>0$）
- `vdot_m3_s`：体积流量 [m³/s]（要求 $\dot v>0$）
- `C0_<物种名>_mol_m3`：入口浓度 [mol/m³]（每个物种一列，要求 $\\ge 0$）

### BSTR（间歇搅拌釜）

- `t_s`：时间 [s]（要求 $t\ge 0$）
- `T_K`：温度 [K]（要求 $T>0$）
- `C0_<物种名>_mol_m3`：初始浓度 [mol/m³]（每个物种一列，要求 $\ge 0$）

## 3) 输出测量列（决定拟合目标）

你在「② 实验数据」选择的 `拟合目标变量` 决定了“需要的测量列类型”：

- 选 `Fout (mol/s)`：需要 `Fout_<物种名>_mol_s`（**仅 PFR/CSTR 可选**）
- 选 `Cout (mol/m^3)`：需要 `Cout_<物种名>_mol_m3`
- 选 `xout (mole fraction)`：需要 `xout_<物种名>`（**仅 PFR/CSTR 可选**）

## 4) 重要规则：只检查“你选中的测量列”

App 只会检查你**当前勾选的目标物种**对应的测量列（由“目标变量 + 目标物种”决定）：

- 这些被选中的测量列：**每一行必须是数字**（不能有 `NaN/空白/文本/Inf`），否则拟合会停止并提示列名与行号  
- 没被选中的测量列：可以为空/缺失（如果你用模板下载，未填的列通常是空白 → 会变成 NaN，但只要你不选它，就不会报错）

## 5) 最常见的 6 个错误（按出现频率）

1. 改了物种名，但 CSV 列名没同步改（例如把 `A` 改成 `H2`，却还用 `F0_A_mol_s`）  
2. 从 Excel 复制时带了空白/文本（例如 `1,000`、`<0.1`、空格），导致某列出现非数字  
3. 单位不一致：把 `vdot` 用了 L/min，但列名却写 `vdot_m3_s`  
4. BSTR 把 `t` 用了分钟，但列名写的是 `t_s`  
5. 输入列出现不合理值：`T_K<=0`、`vdot_m3_s<=0`、入口 `F0/C0` 为负  
6. 选了输出模式/目标物种，但 CSV 里缺少对应列（例如缺少 `Cout_A_mol_m3`）
