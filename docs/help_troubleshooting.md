# 常见问题（按症状快速定位）

## A. CSV/数据相关

### A1. 提示“缺少必要输入列 / 缺少所选输出测量列”

你通常会看到类似信息：

- 缺少必要输入列（例如 `V_m3`、`T_K`、`vdot_m3_s`、`F0_*` 或 `C0_*`）
- 或缺少你当前选择的测量列（例如 `Cout_A_mol_m3`、`Fout_A_mol_s`）

解决：

1) 在「② 实验数据」重新下载 `CSV 模板`，用模板表头填数据（最稳）  
2) 检查物种名是否一致：物种名决定列名（例如物种 `A` → `F0_A_mol_s`）  
3) 注意 BSTR 只能选 `Cout`，不能选 `Fout`

### A2. 提示“所选输出测量列中存在 NaN/非数字值”

这是最常见问题之一：你**勾选的目标物种**对应测量列里存在空白/文本/Inf。

解决（按推荐顺序）：

1) 清理数据：把空白/文本改为数字（Excel 里常见 `1,000`、空格、`<0.1`）  
2) 如果某个物种没有测量：在“进入目标函数的物种”里**取消勾选它**  
3) 如果只有部分行缺测：拆分数据文件（只保留有测量的行）

### A3. 提示“输入条件列存在 NaN/非数字/不合理值”

App 会对输入列做数值与物理约束检查，例如：

- `T_K` 必须 $>0$
- `vdot_m3_s` 必须 $>0$
- `V_m3` 不能为负
- `t_s` 不能为负
- 入口 `F0_*` / `C0_*` 不能为负

解决：按报错里给出的列名与示例行号定位并修正。

## B. 求解/拟合相关

### B1. `solve_ivp 失败` / “所有实验点都无法成功预测”

常见原因：刚性、参数导致反应过快/过慢、步长不合适、容差过严、边界太宽导致优化跑到极端区域。

按顺序尝试：

1) 求解器换 `BDF` 或 `Radau`  
2) 放宽容差：`rtol/atol` 调大一档（例如 `1e-6 → 1e-5`）  
3) 缩紧参数边界、改进初值（避免极端 $k_0/E_a$）  
4) 调整 `max_step_fraction`（更小更稳但更慢；有时设 `0` 反而更快）

### B2. 拟合“不动” / 很慢 / 抖动

优先尝试：

- 分阶段拟合：先只拟合 $k_0$，固定 $E_a$ 与级数 $n$，跑稳后再逐步放开  
- 数值差分太“敏感”：把 `diff_step (Finite Diff)` 调大到 `1e-2 ~ 1e-3`  
- 开启 `Multi-start`（Start Points 5~20）提高找到全局解概率  
- 数据量很大时：先用少量代表性数据跑通，再逐步加回全部数据

### B3. 参数总是跑到边界

可能原因：

- 数据不足以辨识该参数（强相关/共线）
- 初值太差，或边界太宽导致优化走向不合理区域
- 温度跨度太小，导致 $E_a$ 难以拟合

处理：

- 缩紧边界（“合理但不离谱”）
- 增加温度跨度（尤其当要拟合 $E_a$）
- 先固定一部分参数（或改用更简单的模型）

## C. 界面与缓存

### C1. “我改了配置，但页面还在显示上一次的结果”

拟合完成后结果会缓存，以保证图表/导出一致性。

解决：在「③ 拟合与结果」点 `🧹 清除结果`，然后重新拟合。
