# 快速上手（先跑通一次）

> 建议：先用 App 内示例数据跑通完整流程，再替换为真实实验数据（能快速排除“列名/单位/设置”问题）。

## Step 0：准备数据（两种方式二选一）

1) 在本页底部下载**示例 CSV**（PFR / CSTR / BSTR 任选其一）  
2) 或在「② 实验数据」先下载 `CSV 模板`，再把你的实验数据粘进去（**列名必须完全一致**）

## Step 1：建模（① 反应与模型）

1. 左侧选择：反应器 `PFR/CSTR/BSTR`，动力学 `power_law / langmuir_hinshelwood / reversible`
2. 输入物种名（英文逗号分隔，例如 `A,B`），设置反应数
3. 填写化学计量数矩阵 $\nu$（约定：反应物 $\nu<0$，生成物 $\nu>0$）
4. 填写参数初值并勾选要拟合的参数（新手建议：**先少拟合**，分阶段放开）

## Step 2：导入数据（② 实验数据）

1. 上传 CSV（或使用已缓存的上传文件）
2. 选择 `拟合目标变量`
   - **PFR / CSTR**：可选 `Fout (mol/s)` 或 `Cout (mol/m^3)` 或 `xout (mole fraction)`
   - **BSTR**：只能选 `Cout (mol/m^3)`（无出口流）
3. 勾选“进入目标函数的物种”  
   只选你**确实有测量列**、并且该测量列**每一行都是数字**（不能有 NaN/空白/文本/Inf）

## Step 3：拟合与诊断（③ 拟合与结果）

1. 先设置边界（k0/Ea/Order…），再点 `🚀 开始拟合`
2. 拟合后重点看：参数表、奇偶校验图（Measured vs Predicted）、残差图、剖面图
3. 若要清空上一次拟合缓存，用 `🧹 清除结果`（不影响当前输入配置）

## 新手最稳的“默认打法”

- **分阶段拟合**：先只拟合 $k_0$ → 再放开 $E_a$ → 最后再放开级数 $n$
- 若 `solve_ivp 失败` / 收敛不稳：求解器优先换 `BDF` 或 `Radau`
- 若“拟合不动/抖动”：把 `diff_step (Finite Diff)` 调大到 `1e-2 ~ 1e-3`，并开启 `Multi-start`（Start Points 5~20）

## 三个必查项（90% 的报错来自这里）

- 物种名与你 CSV 的列名一致（例如物种 `A` → `F0_A_mol_s` / `Cout_A_mol_m3`）
- 你选中的测量列（由“目标变量 + 目标物种”决定）**不能出现** `NaN/空白/文本/Inf`
- 单位体系一致：$T$ [K]，$V$ [m³]，$\dot v$ [m³/s]，$C$ [mol/m³]，$F$ [mol/s]
